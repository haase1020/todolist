{"ast":null,"code":"import { isString } from '../lang';\nimport { SPLIT_NOT_FOUND } from '../labels';\nimport logFactory from '../logger';\nvar log = logFactory(''); // include BOM and nbsp\n\nvar TRIMMABLE_SPACES_REGEX = /^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/;\nexport function validateSplit(maybeSplit, method) {\n  var item = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'split name';\n\n  if (maybeSplit == undefined) {\n    // eslint-disable-line eqeqeq\n    log.error(\"\".concat(method, \": you passed a null or undefined \").concat(item, \", \").concat(item, \" must be a non-empty string.\"));\n  } else if (!isString(maybeSplit)) {\n    log.error(\"\".concat(method, \": you passed an invalid \").concat(item, \", \").concat(item, \" must be a non-empty string.\"));\n  } else {\n    if (TRIMMABLE_SPACES_REGEX.test(maybeSplit)) {\n      log.warn(\"\".concat(method, \": \").concat(item, \" \\\"\").concat(maybeSplit, \"\\\" has extra whitespace, trimming.\"));\n      maybeSplit = maybeSplit.trim();\n    }\n\n    if (maybeSplit.length > 0) {\n      return maybeSplit;\n    } else {\n      log.error(\"\".concat(method, \": you passed an empty \").concat(item, \", \").concat(item, \" must be a non-empty string.\"));\n    }\n  }\n\n  return false;\n}\n/**\n * This is defined here and in this format mostly because of the logger and the fact that it's considered a validation at product level.\n * But it's not going to run on the input validation layer. In any case, the most compeling reason to use it as we do is to avoid going to Redis and get a split twice.\n */\n\nexport function validateSplitExistance(context, splitName, labelOrSplitObj, method) {\n  if (context.get(context.constants.READY, true)) {\n    // Only if it's ready we validate this, otherwise it may just be that the SDK is not ready yet.\n    if (labelOrSplitObj === SPLIT_NOT_FOUND || labelOrSplitObj == null) {\n      log.warn(\"\".concat(method, \": you passed \\\"\").concat(splitName, \"\\\" that does not exist in this environment, please double check what Splits exist in the web console.\"));\n      return false;\n    }\n  }\n\n  return true;\n}","map":{"version":3,"sources":["/home/mandi/mandi/todolist/node_modules/@splitsoftware/splitio-react/es/splitio/utils/inputValidation/split.js"],"names":["isString","SPLIT_NOT_FOUND","logFactory","log","TRIMMABLE_SPACES_REGEX","validateSplit","maybeSplit","method","item","arguments","length","undefined","error","concat","test","warn","trim","validateSplitExistance","context","splitName","labelOrSplitObj","get","constants","READY"],"mappings":"AAAA,SAASA,QAAT,QAAyB,SAAzB;AACA,SAASC,eAAT,QAAgC,WAAhC;AACA,OAAOC,UAAP,MAAuB,WAAvB;AACA,IAAIC,GAAG,GAAGD,UAAU,CAAC,EAAD,CAApB,C,CAA0B;;AAE1B,IAAIE,sBAAsB,GAAG,mCAA7B;AACA,OAAO,SAASC,aAAT,CAAuBC,UAAvB,EAAmCC,MAAnC,EAA2C;AAChD,MAAIC,IAAI,GAAGC,SAAS,CAACC,MAAV,GAAmB,CAAnB,IAAwBD,SAAS,CAAC,CAAD,CAAT,KAAiBE,SAAzC,GAAqDF,SAAS,CAAC,CAAD,CAA9D,GAAoE,YAA/E;;AAEA,MAAIH,UAAU,IAAIK,SAAlB,EAA6B;AAC3B;AACAR,IAAAA,GAAG,CAACS,KAAJ,CAAU,GAAGC,MAAH,CAAUN,MAAV,EAAkB,mCAAlB,EAAuDM,MAAvD,CAA8DL,IAA9D,EAAoE,IAApE,EAA0EK,MAA1E,CAAiFL,IAAjF,EAAuF,8BAAvF,CAAV;AACD,GAHD,MAGO,IAAI,CAACR,QAAQ,CAACM,UAAD,CAAb,EAA2B;AAChCH,IAAAA,GAAG,CAACS,KAAJ,CAAU,GAAGC,MAAH,CAAUN,MAAV,EAAkB,0BAAlB,EAA8CM,MAA9C,CAAqDL,IAArD,EAA2D,IAA3D,EAAiEK,MAAjE,CAAwEL,IAAxE,EAA8E,8BAA9E,CAAV;AACD,GAFM,MAEA;AACL,QAAIJ,sBAAsB,CAACU,IAAvB,CAA4BR,UAA5B,CAAJ,EAA6C;AAC3CH,MAAAA,GAAG,CAACY,IAAJ,CAAS,GAAGF,MAAH,CAAUN,MAAV,EAAkB,IAAlB,EAAwBM,MAAxB,CAA+BL,IAA/B,EAAqC,KAArC,EAA4CK,MAA5C,CAAmDP,UAAnD,EAA+D,oCAA/D,CAAT;AACAA,MAAAA,UAAU,GAAGA,UAAU,CAACU,IAAX,EAAb;AACD;;AAED,QAAIV,UAAU,CAACI,MAAX,GAAoB,CAAxB,EAA2B;AACzB,aAAOJ,UAAP;AACD,KAFD,MAEO;AACLH,MAAAA,GAAG,CAACS,KAAJ,CAAU,GAAGC,MAAH,CAAUN,MAAV,EAAkB,wBAAlB,EAA4CM,MAA5C,CAAmDL,IAAnD,EAAyD,IAAzD,EAA+DK,MAA/D,CAAsEL,IAAtE,EAA4E,8BAA5E,CAAV;AACD;AACF;;AAED,SAAO,KAAP;AACD;AACD;;;;;AAKA,OAAO,SAASS,sBAAT,CAAgCC,OAAhC,EAAyCC,SAAzC,EAAoDC,eAApD,EAAqEb,MAArE,EAA6E;AAClF,MAAIW,OAAO,CAACG,GAAR,CAAYH,OAAO,CAACI,SAAR,CAAkBC,KAA9B,EAAqC,IAArC,CAAJ,EAAgD;AAC9C;AACA,QAAIH,eAAe,KAAKnB,eAApB,IAAuCmB,eAAe,IAAI,IAA9D,EAAoE;AAClEjB,MAAAA,GAAG,CAACY,IAAJ,CAAS,GAAGF,MAAH,CAAUN,MAAV,EAAkB,iBAAlB,EAAqCM,MAArC,CAA4CM,SAA5C,EAAuD,uGAAvD,CAAT;AACA,aAAO,KAAP;AACD;AACF;;AAED,SAAO,IAAP;AACD","sourcesContent":["import { isString } from '../lang';\nimport { SPLIT_NOT_FOUND } from '../labels';\nimport logFactory from '../logger';\nvar log = logFactory(''); // include BOM and nbsp\n\nvar TRIMMABLE_SPACES_REGEX = /^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/;\nexport function validateSplit(maybeSplit, method) {\n  var item = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'split name';\n\n  if (maybeSplit == undefined) {\n    // eslint-disable-line eqeqeq\n    log.error(\"\".concat(method, \": you passed a null or undefined \").concat(item, \", \").concat(item, \" must be a non-empty string.\"));\n  } else if (!isString(maybeSplit)) {\n    log.error(\"\".concat(method, \": you passed an invalid \").concat(item, \", \").concat(item, \" must be a non-empty string.\"));\n  } else {\n    if (TRIMMABLE_SPACES_REGEX.test(maybeSplit)) {\n      log.warn(\"\".concat(method, \": \").concat(item, \" \\\"\").concat(maybeSplit, \"\\\" has extra whitespace, trimming.\"));\n      maybeSplit = maybeSplit.trim();\n    }\n\n    if (maybeSplit.length > 0) {\n      return maybeSplit;\n    } else {\n      log.error(\"\".concat(method, \": you passed an empty \").concat(item, \", \").concat(item, \" must be a non-empty string.\"));\n    }\n  }\n\n  return false;\n}\n/**\n * This is defined here and in this format mostly because of the logger and the fact that it's considered a validation at product level.\n * But it's not going to run on the input validation layer. In any case, the most compeling reason to use it as we do is to avoid going to Redis and get a split twice.\n */\n\nexport function validateSplitExistance(context, splitName, labelOrSplitObj, method) {\n  if (context.get(context.constants.READY, true)) {\n    // Only if it's ready we validate this, otherwise it may just be that the SDK is not ready yet.\n    if (labelOrSplitObj === SPLIT_NOT_FOUND || labelOrSplitObj == null) {\n      log.warn(\"\".concat(method, \": you passed \\\"\").concat(splitName, \"\\\" that does not exist in this environment, please double check what Splits exist in the web console.\"));\n      return false;\n    }\n  }\n\n  return true;\n}"]},"metadata":{},"sourceType":"module"}